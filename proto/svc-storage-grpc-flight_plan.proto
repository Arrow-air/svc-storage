syntax = "proto3";
package grpc.flight_plan;

import "google/protobuf/empty.proto";
import "google/protobuf/field_mask.proto";
import "google/protobuf/timestamp.proto";
import "svc-storage-grpc.proto";

//Flight Plan gRPC service
service RpcService {
    rpc get_all_with_filter(grpc.SearchFilter) returns (List);
    rpc get_by_id(grpc.Id) returns (Object);
    rpc insert(Data) returns (Response);
    rpc update(UpdateObject) returns (Response);
    rpc delete(grpc.Id) returns (google.protobuf.Empty);
}

//Flight Status Enum
enum FlightStatus {
    //READY
    READY = 0;
    //BOARDING
    BOARDING = 1;
    //IN_FLIGHT
    IN_FLIGHT = 3;
    //FINISHED
    FINISHED = 4;
    //CANCELLED
    CANCELLED = 5;
    //DRAFT
    DRAFT = 6;
}
//Flight Priority Enum
enum FlightPriority {
    //LOW
    LOW = 0;
    //HIGH
    HIGH = 1;
    //EMERGENCY
    EMERGENCY = 2;
}

message Response {
    grpc.ValidationResult validation_result = 1;
    optional Object object = 2;
}

message Object {
    //id UUID v4
    string id = 1;
    //data
    Data data = 2;
}

message UpdateObject {
    //id UUID v4
    string id = 1;
    Data data = 2;
    google.protobuf.FieldMask mask = 3;
}

message Data {
    //pilot_id UUID v4
    string pilot_id = 1;
    //vehicle_id UUID v4
    string vehicle_id = 2;
    //cargo weight in grams per package
    repeated int64 cargo_weight_grams = 3;
    //flight_distance in meters
    int64 flight_distance_meters = 4;
    //weather_conditions
    string weather_conditions = 5;
    //departure_vertiport_id UUID v4, only listed for get results, not needed for creation (known through pad_id)
    optional string departure_vertiport_id = 6;
    //departure_vertipad_id UUID v4
    string departure_vertipad_id = 7;
    //destination_vertiport_id UUID v4, only listed for get results, not needed for creation (known through pad_id)
    optional string destination_vertiport_id = 8;
    //destination_vertipad_id UUID v4
    string destination_vertipad_id = 9;
    //scheduled_departure
    google.protobuf.Timestamp scheduled_departure = 10;
    //scheduled_arrival
    google.protobuf.Timestamp scheduled_arrival = 11;
    //actual_departure
    optional google.protobuf.Timestamp actual_departure = 12;
    //actual_arrival
    optional google.protobuf.Timestamp actual_arrival = 13;
    //flight_release_approval date and time
    optional google.protobuf.Timestamp flight_release_approval = 14;
    //flight_plan_submitted date and time
    optional google.protobuf.Timestamp flight_plan_submitted = 15;
    //approved_by UUID v4
    optional string approved_by = 16;
    //flight_status
    FlightStatus flight_status = 17;
    //flightPriority
    FlightPriority flight_priority = 18;
}

message List {
    //array/vector of flight items
    repeated Object list = 1;
}
